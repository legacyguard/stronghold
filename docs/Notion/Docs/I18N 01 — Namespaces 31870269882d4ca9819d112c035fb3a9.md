# I18N 01 — Namespaces

Area: Frontend, i18n
Related Feature: UI i18n Layer (../Features%2065472ecceccf486fa4e2b758eb9d3e12/UI%20i18n%20Layer%2097b50617281d417c8a6fb7ef5b133a51.md), WillGeneratorWizard (../Features%2065472ecceccf486fa4e2b758eb9d3e12/WillGeneratorWizard%20986fbcb2e067435780059a5ca6060585.md)
Status: Draft
Type: Dev Guidelines

## Účel

Formalizovať použitie i18next namespaces a modulárnu štruktúru prekladových súborov tak, aby sa preklady načítavali efektívne a udržateľne.

## Modulárna štruktúra súborov (namespaces)

```text
/public/locales/
├── sk/
│   ├── common.json            // Zdieľané texty (Uložiť, Zrušiť, Chyba)
│   ├── dashboard.json         // Texty len pre Dashboard
│   ├── will_generator.json    // Texty len pre Tvorcu Závetu
│   ├── family_shield.json     // Texty pre sekciu Rodinný Štít
│   └── landing_page.json      // Texty len pre Landing Page
│
├── cs/
│   ├── common.json
│   ├── dashboard.json
│   └── ...
│
└── en/
    └── ...
```

## Ako to funguje v praxi

1. **Lazy loading (default):** V konfigurácii i18next sa pri štarte načíta iba namespace `common`.
2. **Načítanie na požiadanie:** Pri prechode na `/legacy/will-generator` komponent WillGeneratorWizard požiada i18next o donačítanie namespace `will_generator`.
3. **Výsledok:** Klient sťahuje len tie preklady, ktoré daná obrazovka potrebuje. Rýchlejší first load a menší dátový prenos.

## Príklad konfigurácie i18next

```tsx
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import HttpBackend from 'i18next-http-backend';

void i18n
  .use(HttpBackend)
  .use(initReactI18next)
  .init({
    fallbackLng: 'sk',
    ns: ['common'],            // default namespaces pri štarte
    defaultNS: 'common',
    load: 'languageOnly',
    interpolation: { escapeValue: false },
    backend: {
      loadPath: '/public/locales/{{lng}}/{{ns}}.json',
    },
    react: { useSuspense: true },
  });

export default i18n;
```

## Načítanie namespace v komponente (on‑demand)

```tsx
import { useEffect } from 'react';
import { useTranslation } from 'react-i18next';

export function WillGeneratorWizard() {
  const { i18n, t } = useTranslation('common'); // k dispozícii hneď

  useEffect(() => {
    // donačítanie namespacu pre túto obrazovku
    i18n.loadNamespaces(['will_generator']);
  }, [i18n]);

  return (
    <div>
      <h1>{t('will_generator:title')}</h1>
      <button>{t('buttons.save')}</button>
    </div>
  );
}
```

## Konvencie kľúčov

- Používaj [`dot.case`](http://dot.case) pre hierarchiu, napr. [`buttons.save`](http://buttons.save), `errors.required`, `wizard.step1.title`.
- Pluralizácia: využívaj vstavané pravidlá i18next, napr. `items_one`, `items_few`, `items_many` podľa jazyka.
- Interpolácia: `"welcome": "Ahoj, name!"`.

## Fallback stratégia

- Jazyk → fallback na `en` alebo `sk` podľa produktovej stratégie.
- Namespace → ak chýba, krátkodobý fallback na `common`, dlhodobo doplniť chýbajúci súbor.

## Proces prekladu a kvalita

- PR pipeline kontroluje, že každý namespace má validný JSON a že referencované kľúče existujú.
- Lint: nepovoliť nepoužité kľúče a duplicitné hodnoty v rámci namespacu.
- Snapshot testy kritických obrazoviek.

## Súvisiace

- Prepojené featury: UI i18n Layer, WillGeneratorWizard
- Prepojené dokumenty: Decision Record — Výber i18next, Spec — WillGeneratorWizard
- Revízia:
