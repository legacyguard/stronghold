# Sofia AI - Guided Dialog System

## üéØ **Strategick√Ω prehƒæad**

Sofia AI pre≈°la z jednoduch√©ho chatbota na **inteligentn√Ω "Veden√Ω Dial√≥g" syst√©m**, ktor√Ω minimalizuje n√°klady a maximalizuje u≈æitoƒçnos≈• pomocou:

- **80% FREE interakci√≠** (preddefinovan√© akcie)
- **15% LOW COST interakci√≠** (znalostn√° b√°za + jednoduch√© AI)  
- **5% PREMIUM interakci√≠** (kreat√≠vne AI generovanie)

---

## üìã **Architektura syst√©mu**

### **Core Components**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 SofiaChatV2                         ‚îÇ
‚îÇ           (Hlavn√© pou≈æ√≠vateƒæsk√© rozhranie)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 ‚îÇ        Sofia Router               ‚îÇ
‚îÇ                 ‚îÇ     (Mozog syst√©mu)               ‚îÇ
‚îÇ                 ‚îÇ                                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  FREE (80%)     ‚îÇ  LOW COST (15%)    ‚îÇ PREMIUM (5%) ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ              ‚îÇ
‚îÇ ‚Ä¢ Navigation    ‚îÇ ‚Ä¢ Knowledge Base   ‚îÇ ‚Ä¢ AI Letters ‚îÇ
‚îÇ ‚Ä¢ UI Actions    ‚îÇ ‚Ä¢ Simple AI Query  ‚îÇ ‚Ä¢ Summaries  ‚îÇ
‚îÇ ‚Ä¢ Quick Replies ‚îÇ ‚Ä¢ FAQ Responses    ‚îÇ ‚Ä¢ Creative   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **S√∫bory a zodpovƒõdnosti**

| S√∫bor | √öƒçel | Typ |
|-------|------|-----|
| `sofia-types.ts` | TypeScript defin√≠cie a interfaces | Core |
| `sofia-router.ts` | Hlavn√° rozhodovacia logika | Core |
| `sofia-knowledge-base.ts` | FAQ a predp√≠san√© odpovede | Data |
| `sofia-api.ts` | OpenAI komunik√°cia | API |
| `SofiaChatV2.tsx` | Pou≈æ√≠vateƒæsk√© rozhranie | UI |
| `SofiaActionButtons.tsx` | Akƒçn√© tlaƒçidl√° | UI |
| `sofiaStore.ts` | State management | Store |

---

## üöÄ **Ako syst√©m funguje**

### **1. Pou≈æ√≠vateƒæ klikne na Sofia button**

```typescript
// Automaticky sa inicializuje s kontextov√Ωmi akciami
initializeGuidedDialog() {
  const welcomeCommand = {
    command: 'show_sofia',
    category: 'ui_action',
    context: userContext
  }
  
  // Router vr√°ti uv√≠taciu spr√°vu + action buttons
  sofiaRouter.processCommand(welcomeCommand)
}
```

### **2. Pou≈æ√≠vateƒæ vid√≠ personalizovan√∫ uv√≠taciu spr√°vu + akcie**

```
"Dobr√Ω de≈à, Jana! Vid√≠m, ≈æe ste u≈æ zabezpeƒçili 12 dokumentov. 
Skvel√° pr√°ca! Ako v√°m dnes m√¥≈æem pom√¥c≈•?"

[üìÅ Otvori≈• m√¥j trezor]  [‚ûï Prida≈• dokument]
[üí° ƒåo m√°m robi≈• ƒèalej?]  [üîí Ako s√∫ chr√°nen√© d√°ta?]
```

### **3. Router rozhoduje o spracovan√≠**

```typescript
processCommand(command) {
  // Kateg√≥ria 1: FREE - Navigation/UI actions
  if (category === 'navigation') return handleNavigation()
  
  // Kateg√≥ria 2: LOW COST - Knowledge base
  if (command.startsWith('faq_')) return handleKnowledgeBase()
  
  // Kateg√≥ria 3: PREMIUM - AI generation 
  if (category === 'premium_feature') return handlePremiumAI()
}
```

---

## üí° **Pr√≠klady interakci√≠**

### **FREE Akcia: "Otvori≈• m√¥j trezor"**
```typescript
// Input: Klik na [üìÅ Otvori≈• m√¥j trezor]
// Process: handleNavigationCommand('navigate_vault')
// Output: navigate('/vault') + close chat
// Cost: üÜì FREE
```

### **LOW COST Akcia: "Ako s√∫ chr√°nen√© d√°ta?"**
```typescript
// Input: Klik na [üîí Ako s√∫ chr√°nen√© d√°ta?]
// Process: sofiaKnowledgeBase.getAnswer('faq_security')
// Output: Predp√≠san√° odpoveƒè z knowledge base
// Cost: ‚ö° LOW COST (ale v skutoƒçnosti FREE, lebo bez AI)
```

### **PREMIUM Akcia: "Nap√≠sa≈• osobn√Ω odkaz"**
```typescript
// Input: Klik na [üíå Nap√≠sa≈• osobn√Ω odkaz] 
// Process: sofiaAPI.processPremiumGeneration() -> OpenAI GPT-4
// Output: Personalizovan√Ω odkaz generovan√Ω AI
// Cost: ‚≠ê PREMIUM
```

---

## üõ†Ô∏è **Konfigur√°cia a nasadenie**

### **Environment Variables**
```bash
# V .env.local
VITE_OPENAI_API_KEY=sk-your-key-here  # Pre AI funkcie
```

### **Testovanie bez OpenAI**
Sofia funguje aj bez API kƒæ√∫ƒça - pou≈æ√≠va mock responses:
```typescript
// Ak nie je API key, Sofia pou≈æ√≠va predp√≠san√© odpovede
getMockResponse(request) {
  return predefinedResponses[request.type]
}
```

### **Aktiv√°cia nov√©ho syst√©mu**
```typescript
// V DashboardLayout.tsx
import SofiaChatV2 from '@/components/sofia/SofiaChatV2'

<SofiaChatV2 
  isOpen={isSofiaOpen}
  onClose={() => setIsSofiaOpen(false)}
  variant="floating"
/>
```

---

## üìä **Metriky a optimaliz√°cia**

### **Oƒçak√°van√© rozdelenie interakci√≠**
- **FREE (80%)**: Navigation, z√°kladn√© UI akcie
- **LOW COST (15%)**: FAQ, jednoduch√© AI dotazy  
- **PREMIUM (5%)**: Kreat√≠vne generovanie obsahu

### **N√°kladov√° optimaliz√°cia**
```typescript
// Router najprv sk√∫≈°a najlacnej≈°ie rie≈°enia
if (canSolveWithoutAI) return freeResponse
if (canSolveWithKnowledgeBase) return lowCostResponse  
if (isPremiumFeature) return premiumAIResponse
```

### **Performance monitoring**
```typescript
// Ka≈æd√° odpoveƒè m√° metadata
metadata: {
  cost: 'free' | 'low_cost' | 'premium',
  source: 'predefined' | 'knowledge_base' | 'ai_generated',
  processingTime: number
}
```

---

## üé® **UX Features**

### **Vizu√°lne indik√°tory n√°kladov**
- üÜì **Zadarmo** - Zelen√Ω badge
- ‚ö° **R√Ωchle** - Modr√Ω badge  
- ‚≠ê **Premium** - Fialov√Ω badge + gradient button

### **Respons√≠vny design**
- **Desktop**: Floating chat (400x600px)
- **Mobile**: Fullscreen modal
- **Tablet**: Embedded variant

### **Anim√°cie a feedback**
- Action buttons s hover effects
- Loading states pre AI responses
- Toast notifik√°cie pre akcie
- Plynul√© transitions

---

## üîí **Security & Privacy**

### **OpenAI API Security**
```typescript
// NIKDY neposielame citliv√© √∫daje do AI
const safeToCommunicate = sanitizeUserData(context)
const apiRequest = createSafeSofiaRequest(prompt, safeToCommunicate)
```

### **Local storage**
```typescript
// Conversation history je lok√°lne ulo≈æen√°
const conversations = localStorage.getItem(`sofia_${userId}`)
// Auto-cleanup po 50 spr√°vach
```

---

## üöÄ **ƒéal≈°ie kroky roz≈°√≠renia**

### **F√°za 1: Produkcia (aktu√°lne)**
- ‚úÖ Guided Dialog syst√©m
- ‚úÖ Action-based rozhranie
- ‚úÖ Cost optimization
- ‚úÖ Knowledge base

### **F√°za 2: Pokroƒçil√© funkcie**
- [ ] Proactive suggestions
- [ ] Voice input/output
- [ ] Multi-language support
- [ ] Analytics dashboard

### **F√°za 3: Enterprise**
- [ ] Custom knowledge bases
- [ ] Team collaboration
- [ ] Advanced AI models
- [ ] API pre tretie strany

---

## üìö **Dokument√°cia API**

### **Sofia Router API**
```typescript
interface SofiaCommand {
  id: string
  command: string  
  category: 'navigation' | 'ui_action' | 'ai_query' | 'premium_feature'
  parameters?: any
  context: SofiaContext
}

interface CommandResult {
  type: 'response' | 'navigation' | 'ui_action' | 'error'
  payload: any
  cost: 'free' | 'low_cost' | 'premium'
}
```

### **Knowledge Base API**
```typescript
sofiaKnowledgeBase.getAnswer(queryId, context)
sofiaKnowledgeBase.searchByKeywords(keywords, context)  
sofiaKnowledgeBase.getContextualTips(context)
```

### **AI API**
```typescript  
sofiaAPI.processSimpleQuery(request)     // Low cost
sofiaAPI.processPremiumGeneration(request) // High cost
sofiaAPI.isAvailable()                   // Check status
```

---

**üéâ Sofia AI je teraz pripraven√° poskytn√∫≈• inteligentn√©, cost-effective vedenie pre v≈°etk√Ωch pou≈æ√≠vateƒæov LegacyGuard!**